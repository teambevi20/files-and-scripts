# These are instructions to install Jenkins as a Docker Container 
# Author: Vin Lonje 
# Type of Server: Ubuntu 
# User: jenkins

- Become root
  sudo -i
  
- Update your server 
  apt update

- Install Java as a prerequisite 
  apt install default-jre

- Update your server 
  apt update

- Create a Jenkins user 
  adduser jenkins 

- Enable Jenkins to use Docker commands 
  usermod -aG docker ubuntu

- Disable password for Jenkins 
  echo "jenkins  ALL=(ALL) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/jenkins
  
- Become Jenkins user
  su - jenkins 

- Create a script to install Docker 
# docker-script.sh 
#!/bin/bash
sudo apt update -y
sudo apt install docker.io -y
sudo chmod 666 /var/run/docker.sock
sudo systemctl enable docker 
sudo systemctl start docker
#sudo systemctl status docker

- Install Jenkins as a Docker Container 
  docker run -u 0 --privileged --name jenkins -p 8080:8080 -p 50000:50000 -it -d -v /home/jenkins_home:/var/jenkins_home -v /var/run/docker.sock:/var/run/docker.sock -v $(which docker):/usr/bin/docker jenkins/jenkins:latest

  docker ps docker logs -f <container_ID> 

- Get admin login to jenkins server. 
  docker exec -it <container_ID> /bin/bash 

- Enter into jenkins server container and generate key pairs.
  ssh-keygen -t rsa

- Get the password to open Jenkins
  cat ~/.ssh/id_rsa.pub 
  
- Copy and paste on linux-server ~/.ssh/authorized_keys file.
